"""
현재는 하나의 json 생성을 위한 규칙으로 구성되어 있는데,

nested json 및 json array로 된 결과를 생성하도록 하고 싶어요.

예를 들어, 테이블과 같은 컨텐츠의 경우 json array가 되겠죠.
"""


❯ 다중 구조로 하는 경우 어떤 방식이 유리한가요? 2방식 간의 변환은 용이한가요? 

● 좋은 질문입니다. 두 방식을 기술적으로 비교하겠습니다.

  ---                                                                                                                                                         방식 비교
                                                                                                                                                            
  방식 A: 트리 구조 (Object/Array 규칙 노드)

  // 규칙 정의
  { name: 'header', kind: 'object', children: [
      { name: 'title', kind: 'field', xpath: '//h1' },
      { name: 'date',  kind: 'field', xpath: '//time' }
  ]}
  { name: 'rows', kind: 'array', containerXPath: '//table/tr',
    children: [
      { name: 'name',  kind: 'field', xpath: './/td[1]' },
      { name: 'price', kind: 'field', xpath: './/td[2]' }
  ]}

  // 결과
  {
    "header": { "title": "제목", "date": "2026-03-01" },
    "rows": [{ "name": "A", "price": "100" }, ...]
  }

  방식 B: dot-path 이름

  // 규칙 정의
  { name: 'header.title', xpath: '//h1' }
  { name: 'header.date',  xpath: '//time' }
  // ← Array는 표현 불가

  // 결과 (Object만 가능)
  {
    "header": { "title": "제목", "date": "2026-03-01" }
  }

  ---
  핵심 차이

  ┌─────────────────┬──────────────────────────┬───────────────────────┐
  │      항목       │      방식 A (트리)       │   방식 B (dot-path)   │
  ├─────────────────┼──────────────────────────┼───────────────────────┤
  │ Nested Object   │ ✅ 가능                  │ ✅ 가능               │
  ├─────────────────┼──────────────────────────┼───────────────────────┤
  │ JSON Array      │ ✅ 가능 (containerXPath) │ ❌ 표현 불가          │
  ├─────────────────┼──────────────────────────┼───────────────────────┤
  │ Array 내 Object │ ✅ 가능                  │ ❌ 불가               │
  ├─────────────────┼──────────────────────────┼───────────────────────┤
  │ UI 복잡도       │ 높음 (트리 편집)         │ 낮음 (이름만 변경)    │
  ├─────────────────┼──────────────────────────┼───────────────────────┤
  │ 구현 복잡도     │ 높음 (재귀 추출)         │ 낮음 (flat 변환)      │
  ├─────────────────┼──────────────────────────┼───────────────────────┤
  │ 타입 안전성     │ 높음                     │ 낮음 (이름 오타 위험) │
  └─────────────────┴──────────────────────────┴───────────────────────┘

  ---
  변환 가능성

  B → A 변환: header.title → Object 노드 생성은 자동화 가능하나, B에는 Array 개념이 없어 완전 변환 불가

  A → B 변환: Object 규칙은 flatten 가능, Array 규칙은 B로 표현할 수 없어 변환 불가

  즉, 양방향 완전 변환은 불가능합니다. Array가 포함되는 순간 B 방식은 표현력이 부족합니다.

  ---
  권고

  이 프로젝트의 핵심 목적(테이블 추출 = JSON Array)을 고려하면 **방식 A(트리 구조)**가 필수입니다.

  다만 UI 복잡도가 높으므로 단계적 구현을 권장합니다:

  1. 1단계: ArrayRule UI만 추가 (현재 타입은 이미 있음, UI만 없음)
  2. 2단계: ObjectRule 추가로 Nested JSON 지원
  3. 최종 형태: RuleNode = FieldRule | ObjectRule | ArrayRule 트리 구조

  어느 단계까지 이번에 구현하길 원하시나요?

  ====================

"""
방식 A로 구현하도록 해주세요. 우선 1단계를 진행해주세요.
"""

